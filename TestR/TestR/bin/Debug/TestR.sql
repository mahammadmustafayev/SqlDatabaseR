/*
Deployment script for TestR

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "TestR"
:setvar DefaultFilePrefix "TestR"
:setvar DefaultDataPath "C:\Users\mahammadvm\AppData\Local\Microsoft\VisualStudio\SSDT\TestR"
:setvar DefaultLogPath "C:\Users\mahammadvm\AppData\Local\Microsoft\VisualStudio\SSDT\TestR"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                CURSOR_DEFAULT LOCAL 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET PAGE_VERIFY NONE,
                DISABLE_BROKER 
            WITH ROLLBACK IMMEDIATE;
    END


GO
ALTER DATABASE [$(DatabaseName)]
    SET TARGET_RECOVERY_TIME = 0 SECONDS 
    WITH ROLLBACK IMMEDIATE;


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET QUERY_STORE (QUERY_CAPTURE_MODE = ALL, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 367), MAX_STORAGE_SIZE_MB = 100) 
            WITH ROLLBACK IMMEDIATE;
    END


GO
PRINT N'Creating Assembly [TestLibrary]...';


GO
CREATE ASSEMBLY [TestLibrary]
    AUTHORIZATION [dbo]
    FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300D1CF56AB0000000000000000E00022200B01300000120000000600000000000026310000002000000040000000000010002000000002000004000000000000000600000000000000008000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000D43000004F000000004000008803000000000000000000000000000000000000006000000C0000003C300000380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E746578740000002C110000002000000012000000020000000000000000000000000000200000602E7273726300000088030000004000000004000000140000000000000000000000000000400000402E72656C6F6300000C00000000600000000200000018000000000000000000000000000040000042000000000000000000000000000000000831000000000000480000000200050004220000380E000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B300400D9000000010000110072010000700A724B0000700B731200000A0C07731300000A0D000609731400000A130400096F1500000A0011046F1600000A1305002B58007311000006130600D004000002281700000A281800000A13071613082B27110711089A13090011091106110511096F1900000A6F1A00000A6F1B00000A0000110817581308110811078E6932D10811066F1C00000A000011056F1D00000A130A110A2D9B00DE0D11052C0811056F1E00000A00DC00DE0D11042C0811046F1E00000A00DC00DE0B092C07096F1E00000A00DC0817281F00000A130B2B00110B2A00000001280000020035006BA0000D00000000020024008CB0000D0000000002001A00A6C0000B0000000013300200160000000200001100282000000A6F2100000A026F2200000A0A2B00062A2202282300000A002A2202282300000A002A1E027B010000042A2202037D010000042A1E027B020000042A2202037D020000042A1E027B030000042A2202037D030000042A1E027B040000042A2202037D040000042A1E027B050000042A2202037D050000042A1E027B060000042A2202037D060000042A2202282300000A002A0042534A4201000100000000000C00000076342E302E33303331390000000005006C00000030050000237E00009C050000C805000023537472696E677300000000640B00001001000023555300740C0000100000002347554944000000840C0000B401000023426C6F6200000000000000020000015715A2090900000000FA01330016000001000000230000000400000006000000110000000700000023000000280000000200000001000000060000000C0000000100000001000000030000000000C2030100000000000600F102120506005E0312050600F501E0040F003205000006003802FC030600D402FC030600A002FC0306004503FC0306001103FC0306002A03FC0306004F02FC0306002402F3040600E701F30406008302FC0306006A028B0306008305DB030A00BF02BF04060001002D000A001B048A050A00EE008A050A00A3048A0506008904FC030600CC0112050600B501E00406000902E0040A000E04290406007C01DB0306000501DB0306007104FC030A00960429040600F900DB030E00A0053C040E00A5033C0406006504E70306008004E703000000000F00000000000100010001001000AC050000410001000100010010000800BC05410001000400010010005E044F0541000100050001005F00A30001008D00A60001007300A6000100A800A6000100BF00A6000100D500A60050200000000096004C04A90001006021000000009600A001AD0001008221000000008618DA04060002008B21000000008618DA040600020094210000000086084800B20002009C210000000086084F0001000200A5210000000086084C015B000300AD210000000086085A0110000300B62100000000860832015B000400BE210000000086083F0110000400C72100000000860868015B000500CF21000000008608720110000500D821000000008608B0035B000600E021000000008608B90310000600E92100000000860862055B000700F1210000000086086E0510000700FA21000000008618DA040600080000000100B7050000010085030000010085030000010085030000010085030000010085030000010085030900DA0401001100DA0406001900DA040A002900DA0410003100DA0410003900DA0410004100DA0410004900DA0410005100DA0410005900DA0410006100DA0415006900DA0410007100DA0410007900DA0410008900DA040600B900DA040600C900DA041A000C00DA0406009900DA041000A100DA044200D100E2030600A100B1044900D90017014E00D90041055500E90029015B00F100D2035F00B1007C0364000C005B006A00F10056007000F900AD01060001017A05740011018101800011017C048600190194018C008100DA04060020007B00A30121008300A30121008B00A8012E000B00BE002E001300C7002E001B00E6002E002300EF002E002B0000012E00330000012E003B0000012E004300EF002E004B0006012E00530000012E005B0000012E0063001E012E006B0048012E007300550140007B00A30141008300A30141008B00A80161008300A30161008B00A80181008300A30181008B00A801A0008300A301A1008300A301A1008B00A801C0008300A301C1008300A301C1008B00A801E0008300A30100018300A30120018300A30140018300A30160018300A30180018300A301A0018300A301C0018300A301E0018300A30100028300A30120007C000400010000005300B60000005E01BA0000004301BA0000007601BA000000BD03BA0000007205BA0002000500030001000600030002000700050001000800050002000900070001000A00070002000B00090001000C00090002000D000B0001000E000B0002000F000D00010010000D003B00048000000100000000000000000000000000BC050000040000000000000000000000910024000000000004000000000000000000000091001800000000000D00000000000000000000009A003C04000000000000004C697374603100436C61737331003C4D6F64756C653E0053797374656D2E44617461006D73636F726C69620053797374656D2E436F6C6C656374696F6E732E47656E65726963006765745F4964007365745F4964005265616400416464003C49643E6B5F5F4261636B696E674669656C64003C4C6173744E616D653E6B5F5F4261636B696E674669656C64003C46697273744E616D653E6B5F5F4261636B696E674669656C64003C50686F6E653E6B5F5F4261636B696E674669656C64003C4D61696C3E6B5F5F4261636B696E674669656C64003C416464726573733E6B5F5F4261636B696E674669656C640053716C436F6D6D616E640049446973706F7361626C650052756E74696D655479706548616E646C65004765745479706546726F6D48616E646C65006765745F4E616D65006765745F4C6173744E616D65007365745F4C6173744E616D65006765745F46697273744E616D65007365745F46697273744E616D65006765745F50686F6E65007365745F50686F6E650054797065006765745F43757272656E7443756C7475726500546F5469746C654361736500546F546F4C6973744361736500446973706F736500446562756767657242726F777361626C65537461746500436F6D70696C657247656E65726174656441747472696275746500477569644174747269627574650044656275676761626C6541747472696275746500446562756767657242726F777361626C6541747472696275746500436F6D56697369626C6541747472696275746500417373656D626C795469746C6541747472696275746500417373656D626C7954726164656D61726B417474726962757465005461726765744672616D65776F726B41747472696275746500417373656D626C7946696C6556657273696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E4174747269627574650053716C46756E6374696F6E41747472696275746500417373656D626C794465736372697074696F6E41747472696275746500436F6D70696C6174696F6E52656C61786174696F6E7341747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C79436F6D70616E794174747269627574650052756E74696D65436F6D7061746962696C6974794174747269627574650053657456616C75650076616C75650053797374656D2E52756E74696D652E56657273696F6E696E6700466F726D617474696E67006765745F4D61696C007365745F4D61696C00546573744C6962726172792E646C6C006765745F4974656D0053797374656D004F70656E0053797374656D2E476C6F62616C697A6174696F6E0053797374656D2E5265666C656374696F6E004462436F6E6E656374696F6E0053716C436F6E6E656374696F6E0053797374656D2E446174612E436F6D6D6F6E004E6577746F6E736F66742E4A736F6E0052657475726E73506572736F6E4A736F6E00506572736F6E0043756C74757265496E666F004D656D626572496E666F006765745F54657874496E666F0050726F7065727479496E666F004462446174615265616465720053716C446174615265616465720045786563757465526561646572004D6963726F736F66742E53716C5365727665722E536572766572002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E496E7465726F7053657276696365730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730047657450726F7065727469657300546573744C6962726172792E4D6F64656C73006765745F41646472657373007365745F416464726573730053657269616C697A654F626A6563740053797374656D2E446174612E53716C436C69656E74004A736F6E436F6E7665727400506572736F6E54657374007465787400546573744C696272617279000049530045004C0045004300540020002A002000460052004F004D00200050006500720073006F006E007300200046004F00520020004A0053004F004E002000500041005400480020000080C15300650072007600650072003D0052005500420049005300300039005C00530051004C0045005800500052004500530053003B00440061007400610062006100730065003D00500068006F006E00650042006F006F006B003B0054007200750073007400650064005F0043006F006E006E0065006300740069006F006E003D0074007200750065003B0054007200750073007400530065007200760065007200430065007200740069006600690063006100740065003D007900650073003B00000000C09FC306A97DEC48BAFD1D1876EBD79400042001010803200001052001011111042001010E04200101020520010111611A070C0E0E151249011210124D1251125512101D1259081259020E06151249011210062002010E124D0420001255060001126D11710520001D12590320000E0420011C0E052002011C1C052001011300032000020700020E1C1180850307010E05000012808905200012808D0420010E0E08B77A5C561934E0890830AD4FE6B2A6AEED02060802060E0300000E0400010E0E03200008032800080328000E0801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F7773010801000701000000001001000B546573744C696272617279000005010000000017010012436F7079726967687420C2A920203230323300002901002432343636386430372D323331352D346536662D623331622D31636263373337373832646100000C010007312E302E302E3000004D01001C2E4E45544672616D65776F726B2C56657273696F6E3D76342E372E320100540E144672616D65776F726B446973706C61794E616D65142E4E4554204672616D65776F726B20342E372E320401000000080100000000000000000000000000001FA636870000000002000000600000007430000074120000000000000000000000000000100000000000000000000000000000005253445376F80DED014ED74BAD02430E09C2E3D401000000433A5C55736572735C6D6168616D6D6164766D5C4465736B746F705C54657374525C546573744C6962726172795C6F626A5C44656275675C546573744C6962726172792E70646200FC30000000000000000000001631000000200000000000000000000000000000000000000000000008310000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001000000018000080000000000000000000000000000001000100000030000080000000000000000000000000000001000000000048000000584000002C03000000000000000000002C0334000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000001000000000000000100000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B0048C020000010053007400720069006E006700460069006C00650049006E0066006F0000006802000001003000300030003000300034006200300000001A000100010043006F006D006D0065006E007400730000000000000022000100010043006F006D00700061006E0079004E0061006D006500000000000000000040000C000100460069006C0065004400650073006300720069007000740069006F006E000000000054006500730074004C006900620072006100720079000000300008000100460069006C006500560065007200730069006F006E000000000031002E0030002E0030002E003000000040001000010049006E007400650072006E0061006C004E0061006D006500000054006500730074004C006900620072006100720079002E0064006C006C0000004800120001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A90020002000320030003200330000002A00010001004C006500670061006C00540072006100640065006D00610072006B00730000000000000000004800100001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000054006500730074004C006900620072006100720079002E0064006C006C00000038000C000100500072006F0064007500630074004E0061006D0065000000000054006500730074004C006900620072006100720079000000340008000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0030002E003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000283100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000;


GO
PRINT N'Creating Function [dbo].[ReturnsPersonJson]...';


GO
CREATE FUNCTION [dbo].[ReturnsPersonJson]
( )
RETURNS NVARCHAR (MAX)
AS
 EXTERNAL NAME [TestLibrary].[PersonTest].[ReturnsPersonJson]


GO
PRINT N'Creating Function [dbo].[ToToListCase]...';


GO
CREATE FUNCTION [dbo].[ToToListCase]
(@text NVARCHAR (MAX) NULL)
RETURNS NVARCHAR (MAX)
AS
 EXTERNAL NAME [TestLibrary].[PersonTest].[ToToListCase]


GO
PRINT N'Update complete.';


GO
